<!DOCTYPE html>
<html lang="zh-CN" style="background:#000">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>BlogWriter</title>
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="BlogWriter">
<meta name="color-scheme" content="dark">
<link rel="apple-touch-startup-image" media="(device-width:402px) and (device-height:768px) and (-webkit-device-pixel-ratio:3)" href="./img/splash/iphone-17-pro-portrait.png">
<link rel="apple-touch-startup-image" href="./img/splash/iphone-17-pro-portrait.png">
<style>
html,body{background:#000!important;margin:0;padding:0;color:#e0e0e0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
#l{position:fixed;top:0;left:0;right:0;bottom:0;background:#000;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:9999}
.lt{color:#888;font-size:32px;margin-bottom:30px}
.ld{display:flex;gap:20px}
.lb{width:15px;height:15px;border:2px solid #666;background:transparent}
</style>
</head>
<body>
<div id="l"><div class="lt">Loading...</div><div class="ld"><div class="lb"></div><div class="lb"></div><div class="lb"></div></div></div>
<div id="app" style="display:none"></div>
<script>
// 极简加载逻辑
var loaded=false;
function init(){
    if(loaded)return;
    loaded=true;

    // 动态加载所有资源
    var css=[
        'https://unpkg.com/element-ui@2.15.13/lib/theme-chalk/index.css',
        'https://cdn.jsdelivr.net/npm/vditor@3.9.4/dist/index.css',
        'css/base.css','css/components.css','css/editor.css','css/mobile.css'
    ];
    var js=[
        'https://unpkg.com/vue@2.6.14/dist/vue.min.js',
        'https://unpkg.com/element-ui@2.15.13/lib/index.js',
        'https://cdn.jsdelivr.net/npm/vditor@3.9.4/dist/index.min.js',
        'github-service.js','image-service.js',
        'js/config.js','js/github-config-component.js','js/mobile-utils.js',
        'js/editor-manager.js','js/image-handler.js','js/app.js'
    ];

    // 加载CSS
    css.forEach(function(href){
        var link=document.createElement('link');
        link.rel='stylesheet';
        link.href=href;
        document.head.appendChild(link);
    });

    // 加载JS
    var loadScript=function(i){
        if(i>=js.length){
            // 所有脚本加载完成，隐藏loading
            setTimeout(function(){
                var l=document.getElementById('l');
                if(l){
                    l.style.opacity='0';
                    l.style.transition='opacity 0.3s';
                    setTimeout(function(){l.style.display='none'},300);
                }
                document.getElementById('app').style.display='block';
            },500);
            return;
        }
        var script=document.createElement('script');
        script.src=js[i];
        script.onload=function(){loadScript(i+1)};
        script.onerror=function(){loadScript(i+1)};
        document.head.appendChild(script);
    };
    loadScript(0);
}

// 立即初始化
if(document.readyState==='loading'){
    document.addEventListener('DOMContentLoaded',init);
}else{
    init();
}
</script>
</body>
</html>